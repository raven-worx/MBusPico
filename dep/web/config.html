<!doctype html><html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
<title>MBusPico</title>
<link href="/bootstrap.min.css" rel="stylesheet">
<script src="/config.js"></script>
<style>
.section-heading {
  height: 100px;
}
.form-switch.form-switch-lg {
  margin-bottom: 1rem;
}
.form-switch.form-switch-lg .form-check-input {
  height: 1.2rem;
  width: calc(2rem + 0.75rem);
  border-radius: 3rem;
}
div.alert.result-alert {
	bottom: 50px;
	width: 80%;
}
</style>
</head>
<body>
<div class="" style="width: 100%;">

<nav class="navbar navbar-dark bg-dark fixed-top">
<div class="container-fluid">
	<a class="navbar-brand" href="#">MBusPico</a>
	<ul class="nav nav-pills">
		<li class="nav-item"><a class="nav-link text-white" href="#meter">METER</a></li>
		<li class="nav-item"><a class="nav-link text-white" href="#wifi">WIFI</a></li>
		<li class="nav-item"><a class="nav-link text-white" href="#http">HTTP</a></li>
		<li class="nav-item"><a class="nav-link text-white" href="#udp">UDP</a></li>
	</ul>
</div>
</nav>

<div class="container">
<form id="config_form" action="/config/data" method="post" enctype="multipart/form-data">

<div id="meter" class="d-flex mb-3 align-items-end section-heading"><div class="h4 flex-fill border-bottom text-uppercase fw-bold">Smart Meter</div></div>
<div class="mb-3"><label for="meter_key" class="form-label">Encryption Key</label><input type="text" class="form-control" name="meter_key" id="meter_key">
<p class="form-text">The encryption key of the smart power meter. This key must be requested from your power provider.<br><span class="fw-bold">Key must be provided in hexadecimal format (0-9 and A-F)</span></p>
</div>


<div id="wifi" class="d-flex mb-3 align-items-end section-heading"><div class="h4 flex-fill border-bottom text-uppercase fw-bold">Wifi</div></div>
<div class="mb-3"><label for="wifi_ssid" class="form-label">SSID</label><input type="text" class="form-control" name="wifi_ssid" id="wifi_ssid"><span class="form-text">The SSID (name) of the Wifi to connect to</span></div>
<div class="mb-3"><label for="wifi_password" class="form-label">Password</label><input type="text" class="form-control" name="wifi_password" id="wifi_password"><span class="form-text">The password of the Wifi network</span></div>
<div class="mb-3"><label for="wifi_hostname" class="form-label">Hostname</label><input type="text" class="form-control" name="wifi_hostname" id="wifi_hostname"><span class="form-text">The name of this device in the network</span></div>
<div class="alert alert-primary d-flex align-items-center fade show" role="alert">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
<path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
</svg>
<div class="mx-3"><p>If the device cant successfully establish a connection to the Wifi network, it will reboot into AP mode again to be able to adapt the configuration.</p>
<p class="mb-0">(SSID: '<span class="font-monospace">MBusPico</span>', Password: '<span class="font-monospace">mbuspico</span>', IP: '<span class="font-monospace">192.168.4.1</span>')</p></div>
</div>


<div id="http" class="d-flex mb-3 align-items-end section-heading"><div class="h4 flex-fill border-bottom text-uppercase fw-bold">HTTP</div></div>
<div class="mb-3"><label for="http_port" class="form-label">Port</label><input type="number" min="1" max="65535" class="form-control" name="http_port" id="http_port"><span class="form-text">1-65535</span></div>
<div class="mb-3"><label for="http_auth_user" class="form-label">Auth User</label> <input type="text" class="form-control" name="http_auth_user" id="http_auth_user"></div>
<div class="mb-3"><label for="http_auth_pwd" class="form-label">Auth Password</label> <input type="text" class="form-control" name="http_auth_pwd" id="http_auth_pwd"></div>
<div class="mb-3"><span class="form-text">Specifies if either a username and/or password is required to access the web interface.</span></div>


<div id="udp" class="d-flex mb-3 align-items-end section-heading"><div class="h4 flex-fill border-bottom text-uppercase fw-bold">UDP</div></div>
<div class="form-check form-switch form-switch-lg">
  <input class="form-check-input" type="checkbox" id="udp_enabled" name="udp_enabled">
  <label class="form-check-label mx-2" for="udp_enabled">UDP Enabled</label>
</div>
<div class="mb-3"><label for="udp_receiver" class="form-label">Receiver</label><input type="text" class="form-control" name="udp_receiver" id="udp_receiver"><span class="form-text">IP address or hostname the meter-data will be send to via UDP</span></div>
<div class="mb-3"><label for="udp_port" class="form-label">Port</label><input type="number" min="0" max="65535" class="form-control" name="udp_port" id="udp_port"><span class="form-text">UDP port of the receiver [1-65535]</span></div>
<div class="mb-3"><label for="udp_interval" class="form-label">Interval</label><input type="number" min="5" max="3600" class="form-control" name="udp_interval" id="udp_interval"><span class="form-text">Time interval [seconds] the data will be send to the UDP receiver</span></div>

</form>

<div id="debug" class="d-flex mb-3 align-items-end section-heading"><div class="h4 flex-fill border-bottom text-uppercase fw-bold">DEBUG</div></div>
<div class="mb-3"><label for="debug_log" class="form-label">Log</label><textarea class="form-control" id="debug_log" rows="20" readonly></textarea></div>

<div style="margin-bottom: 5em;"></div>

</div>

<footer class="bg-dark text-center text-white fixed-bottom pt-2 pb-2">
<div class="row justify-content-between">
<div class="col-2">
<a class="text-white" href="https://github.com/raven-worx/MBusPico" target="_blank">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
</svg>
</a>
</div>
<div class="btn-group btn-sm col-2" role="group">
	<button type="button" class="btn btn-sm btn-danger" title="Reboot MBusPico device" onclick="Reboot(false)">Reboot</button>
	<button type="button" class="btn btn-sm btn-warning" title="Reboot MBusPico device into USB update mode" onclick="Reboot(true)">Update</button>
</div>
<button type="button" id="btn_save" class="col-2 btn btn-success btn-sm" onclick="SaveSettings()">Save configuration</button>

<div class="col-2" id="version_text"></div>
</div>
</footer>

</div>

<script src="/bootstrap.bundle.min.js"></script>

</body></html>